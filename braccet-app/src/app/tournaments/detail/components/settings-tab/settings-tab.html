<div class="h-full flex flex-col">
  <h3 class="text-lg font-semibold text-gray-900 mb-4">Settings</h3>

  @if (error()) {
    <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4 text-sm">
      {{ error() }}
    </div>
  }

  @if (success()) {
    <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4 text-sm">
      {{ success() }}
    </div>
  }

  <form (ngSubmit)="onSubmit()" class="flex-1 overflow-y-auto">
    <div class="space-y-4">
      <!-- Name -->
      <div>
        <label for="name" class="block text-sm font-medium text-gray-700 mb-1">
          Tournament Name <span class="text-red-500">*</span>
        </label>
        <input
          type="text"
          id="name"
          name="name"
          [ngModel]="name()"
          (ngModelChange)="name.set($event)"
          class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"
          placeholder="Enter tournament name"
          maxlength="200"
          required
        />
      </div>

      <!-- Game -->
      <div>
        <label for="game" class="block text-sm font-medium text-gray-700 mb-1">
          Game
        </label>
        <input
          type="text"
          id="game"
          name="game"
          [ngModel]="game()"
          (ngModelChange)="game.set($event)"
          class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"
          placeholder="e.g., Super Smash Bros"
          maxlength="100"
        />
      </div>

      <!-- Description -->
      <div>
        <label for="description" class="block text-sm font-medium text-gray-700 mb-1">
          Description
        </label>
        <textarea
          id="description"
          name="description"
          [ngModel]="description()"
          (ngModelChange)="description.set($event)"
          rows="3"
          class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none text-sm"
          placeholder="Describe your tournament..."
        ></textarea>
      </div>

      <!-- Max Participants -->
      <div>
        <label for="maxParticipants" class="block text-sm font-medium text-gray-700 mb-1">
          Max Participants
        </label>
        <input
          type="number"
          id="maxParticipants"
          name="maxParticipants"
          [ngModel]="maxParticipants()"
          (ngModelChange)="maxParticipants.set($event)"
          class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"
          placeholder="Leave empty for unlimited"
          min="2"
        />
      </div>

      <!-- Starts At -->
      <div>
        <label for="startsAt" class="block text-sm font-medium text-gray-700 mb-1">
          Start Date & Time
        </label>
        <input
          type="datetime-local"
          id="startsAt"
          name="startsAt"
          [ngModel]="startsAt()"
          (ngModelChange)="startsAt.set($event)"
          class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"
        />
        <label class="flex items-center gap-2 mt-2 cursor-pointer">
          <input
            type="checkbox"
            name="startsAtTentative"
            [ngModel]="startsAtTentative()"
            (ngModelChange)="startsAtTentative.set($event)"
            class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
          />
          <span class="text-sm text-gray-600">Tentative (date may change)</span>
        </label>
      </div>

      <!-- Registration Open -->
      <div class="pt-2 border-t border-gray-200">
        <label class="flex items-center gap-2 cursor-pointer">
          <input
            type="checkbox"
            name="registrationOpen"
            [ngModel]="registrationOpen()"
            (ngModelChange)="registrationOpen.set($event)"
            class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
          />
          <span class="text-sm font-medium text-gray-700">Registration Open</span>
        </label>
        <p class="text-xs text-gray-500 mt-1 ml-6">Allow new participants to join</p>
      </div>
    </div>

    <!-- Save Button -->
    <div class="mt-6 pt-4 border-t border-gray-200">
      <button
        type="submit"
        [disabled]="saving() || !name().trim()"
        class="w-full bg-blue-600 text-white py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm"
      >
        @if (saving()) {
          Saving...
        } @else {
          Save Changes
        }
      </button>
    </div>
  </form>

  <!-- Danger Zone -->
  <div class="mt-6 pt-4 border-t border-red-200">
    <h4 class="text-sm font-medium text-red-700 mb-2">Danger Zone</h4>
    <p class="text-xs text-gray-600 mb-3">
      Deleting a tournament is permanent and cannot be undone.
    </p>
    <button
      type="button"
      (click)="deleteTournament()"
      [disabled]="deleting()"
      class="w-full bg-red-600 text-white py-2 rounded-lg font-medium hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm"
    >
      @if (deleting()) {
        Deleting...
      } @else {
        Delete Tournament
      }
    </button>
  </div>
</div>
